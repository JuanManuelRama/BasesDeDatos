@startuml DER
!define ERD
hide methods

entity Sucursal {
  Sucursal_Nro : bigint
  --
  Sucursal_Domicilio : int <<FK>>
  Sucursal_Telefono : nvarchar(255)
  Sucursal_Mail : nvarchar(255)
}

entity Domicilio {
  Domicilio_ID <<auto>> : bigint
  --
  Domicilio_Direccion : nvarchar(255)
  Domicilio_Localidad : int <<FK>>
}

entity Localidad {
  Localidad_ID <<auto>> : int
  --
  Localidad_Nombre : nvarchar(255)
  Localidad_Provincia : int <<FK>>
}

entity Provincia {
  Provincia_ID <<auto>> : int
  --
  Provincia_Nombre : nvarchar(255)
}

entity Cliente {
  Cliente_ID <<auto>> : bigint
  --
  Cliente_DNI : bigint
  Cliente_Domicilio : int
  Cliente_Nombre : nvarchar(255)
  Cliente_Apellido : nvarchar(255)
  Cliente_Telefono : nvarchar(255)
  Cliente_FechaNacimiento : datetime2(6)
  Cliente_Mail : nvarchar(255)
}

entity Pedido {
  Pedido_Numero : decimal(18,0)
  --
  Pedido_Sucursal : bigint <<FK>>
  Pedido_Cliente : bigint <<FK>>
  Pedido_Fecha : datetime2(6)
  Pedido_Estado : nvarchar(255)
  Pedido_Total : decimal(18,2)
}

entity Pedido_Detalle {
  Pedido_Numero : decimal(18,0) <<FK>>
  Sillon_Modelo : bigint <<FK>>
  --
  Detalle_Pedido_Cantidad : bigint
  Detalle_Pedido_Precio : decimal(18,2)
  Detalle_Pedido_Subtotal : decimal(18,2)
}

entity Pedido_Cancelacion {
  Cancelacion_Pedido : decimal(18,0) <<FK>>
  --
  Cancelacion_Fecha : datetime2(6)
  Cancelacion_Motivo : varchar(255)
}

entity Factura {
  Factura_Numero : bigint
  --
  Factura_Cliente : bigint <<FK>>
  Factura_Sucursal : bigint <<FK>>
  Factura_Pedido : decimal(18,0) <<FK>>
  Factura_Fecha : datetime2(6)
  Factura_Total : decimal(38,2)
}

entity Detalle_Factura {
  Detalle_Factura_Numero : bigint <<FK>>
  Detalle_Factura_Sillon : bigint <<FK>>
  --
  Detalle_Factura_Precio : decimal(18,2)
  Detalle_Factura_Cantidad : decimal(18,0)
  Detalle_Factura_SubTotal : decimal(18,2)
}

entity Envio {
  Envio_Nro : decimal(18,0)
  --
  Envio_Factura : bigint <<FK>>
  Envio_Fecha_Programada : datetime2(6)
  Envio_Fecha_Entrega : datetime2(6)
  Envio_Importe_Translado : decimal(18,2)
  Envio_Importe_Subida : decimal(18,2)
  Envio_Total : decimal(18,2)
}

entity Compra {
  Compra_Nro : decimal(18,0)
  --
  Compra_Sucursal : bigint <<FK>>
  Compra_Proveedor : bigint <<FK>>
  Compra_Fecha : datetime2(6)
  Compra_Total : decimal(18,2)
}

entity Detalle_Compra {
  Detalle_Compra_Nro : decimal <<FK>>
  Detalle_Compra_Material : bigint <<FK>>
  --
  Detalle_Compra_Precio : decimal(18,2)
  Detalle_Compra_Cantidad : decimal(18,0)
  Detalle_Compra_Subtotal : decimal(18,2)
}

entity Proveedor {
  Proveedor_ID <<auto>> : bigint
  --
  Proveedor_CUIT : nvarchar(255)
  Proveedor_Razon_Social : nvarchar(255)
  Proveedor_Domicilio : int
  Proveedor_Telefono : nvarchar(255)
  Proveedor_Mail : nvarchar(255)
}

entity Sillon {
  Sillon_Codigo : bigint
  --
  Sillon_Modelo : bigint <<FK>>
  Sillon_Medida : int <<FK>>
  Sillon_Madera : int <<FK>>
  Sillon_Tela : int <<FK>>
  Sillon_Relleno : int <<FK>>
}

entity Modelo {
  Modelo_Codigo : bigint
  --
  Modelo_Nombre : nvarchar(255)
  Modelo_Descripcion : nvarchar(255)
  Modelo_Precio : decimal(18,2)
}

entity Medida {
  Medida_ID <<auto>> : int
  --
  Medida_Alto : decimal(18,2)
  Medida_Ancho : decimal(18,2)
  Medida_Profundidad : decimal(18,2)
  Medida_Precio : decimal(18,2)
}

entity Material {
  Material_ID <<auto>> : bigint
  --
  Material_Tipo : nvarchar(255)
  Material_Nombre : nvarchar(255)
  Material_Descripcion : nvarchar(255)
  Material_Precio : decimal(38,2)
}

entity Tela {
  Tela_ID : int <<FK>>
  --
  Tela_Color : nvarchar(255)
  Tela_Textura : nvarchar(255)
}

entity Relleno {
  Relleno_ID : int <<FK>>
  --
  Relleno_Densidad : decimal(38,2)
}

entity Madera {
  Madera_ID : int <<FK>>
  --
  Madera_Color : nvarchar(255)
  Madera_Dureza : nvarchar(255)
}

Proveedor ||--o{ Compra
Compra ||--|{ Detalle_Compra
Sucursal ||--o{ Compra
Sucursal ||--o{ Pedido
Sucursal ||--o{ Factura
Pedido ||--|{ Pedido_Detalle
Cliente ||--o{ Pedido
Envio ||--|| Factura
Cliente ||--o{ Factura
Pedido ||--o| Pedido_Cancelacion
Modelo ||--o{ Sillon
Medida ||--o{ Sillon
Tela ||--o{ Sillon
Relleno ||--o{ Sillon
Madera ||--o{ Sillon
Sillon ||--o{ Pedido_Detalle
Sillon ||--o{ Detalle_Factura
Pedido ||--o| Factura
Factura ||--|{ Detalle_Factura
Material ||--o{ Detalle_Compra
Material -- Madera
Material -- Tela
Material -- Relleno
Localidad ||--|{ Domicilio
Provincia ||--|{ Localidad
Domicilio ||--o{ Cliente
Domicilio ||--o{ Proveedor
Domicilio ||--o{ Sucursal
@enduml
